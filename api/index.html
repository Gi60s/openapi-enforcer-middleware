<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API | OpenAPI Enforcer Middleware</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="API documentation for all options and methods available for the OpenAPI Enforcer Middleware.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/openapi-enforcer-middleware/assets/css/0.styles.cb64e744.css" as="style"><link rel="preload" href="/openapi-enforcer-middleware/assets/js/app.98b0fab6.js" as="script"><link rel="preload" href="/openapi-enforcer-middleware/assets/js/2.dcde1ce6.js" as="script"><link rel="preload" href="/openapi-enforcer-middleware/assets/js/12.aba0c263.js" as="script"><link rel="preload" href="/openapi-enforcer-middleware/assets/js/5.86c39536.js" as="script"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/10.ffdc4f19.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/11.03083ece.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/13.cb55f3b4.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/14.9ec011dc.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/15.a041b35e.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/16.45056757.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/17.80dcc11e.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/18.d8f1eb83.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/19.371dae60.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/20.bf47b38c.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/21.0f4a8a32.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/22.c1061d7e.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/23.01129fdf.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/24.b2281de7.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/3.61b802ad.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/4.f5d0af7c.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/6.a875d6bd.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/7.eff6e27d.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/8.eea0e05f.js"><link rel="prefetch" href="/openapi-enforcer-middleware/assets/js/9.60becb93.js">
    <link rel="stylesheet" href="/openapi-enforcer-middleware/assets/css/0.styles.cb64e744.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/openapi-enforcer-middleware/" class="home-link router-link-active"><!----> <span class="site-name">OpenAPI Enforcer Middleware</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/openapi-enforcer-middleware/guide/getting-started.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/openapi-enforcer-middleware/api/index.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/openapi-enforcer-middleware/v1/" class="nav-link">
  1.x
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/openapi-enforcer-middleware/guide/getting-started.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/openapi-enforcer-middleware/api/index.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/openapi-enforcer-middleware/v1/" class="nav-link">
  1.x
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/openapi-enforcer-middleware/api/" aria-current="page" class="active sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/openapi-enforcer-middleware/api/#factory-constructor" class="sidebar-link">Factory (Constructor)</a></li><li class="sidebar-sub-header"><a href="/openapi-enforcer-middleware/api/#docs" class="sidebar-link">Docs</a></li><li class="sidebar-sub-header"><a href="/openapi-enforcer-middleware/api/#init" class="sidebar-link">Init</a></li><li class="sidebar-sub-header"><a href="/openapi-enforcer-middleware/api/#mock" class="sidebar-link">Mock</a></li><li class="sidebar-sub-header"><a href="/openapi-enforcer-middleware/api/#on" class="sidebar-link">On</a></li><li class="sidebar-sub-header"><a href="/openapi-enforcer-middleware/api/#route" class="sidebar-link">Route</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="factory-constructor"><a href="#factory-constructor" class="header-anchor">#</a> Factory (Constructor)</h2> <p><code>OpenAPIEnforcerMiddleware (openapi: any)</code></p> <p>This method is not technically a constructor function because it does not use the <code>new</code> keyword, but it performs a similar operation as a constructor and returns an object with methods you can execute.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>openapi</td> <td>OpenAPI</td> <td><strong>REQUIRED.</strong> An OpenAPI object acquired from calling the <a href="https://www.npmjs.com/package/openapi-enforcer" target="_blank" rel="noopener noreferrer">OpenAPI Enforcer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and awaiting the promise. See the example below for details.</td></tr></tbody></table> <p><strong>Returns</strong> an object with the following methods:</p> <ul><li><a href="#docs">docs</a> - Generate an endpoint for serving your OpenAPI documentation using Redoc.</li> <li><a href="#init">init</a> - Initialize the openapi-enforcer-middleware.</li> <li><a href="#mock">mock</a> - Enable fallback (automatic) mocking.</li> <li><a href="#on">on</a> - Add event listeners.</li> <li><a href="#route">route</a> - Automatically generate routes.</li></ul> <p><strong>Example</strong></p> <!----> <h2 id="docs"><a href="#docs" class="header-anchor">#</a> Docs</h2> <p><code>docs (options?: DocsOptions)</code></p> <p>Generate an endpoint for serving your OpenAPI documentation using Redoc. This endpoint does not require that the <a href="#init">init</a> middleware be called first.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><a href="#docs-options">Docs Options</a></td> <td>An optional parameter that describes how the docs middleware should work.</td></tr></tbody></table> <h4 id="docs-options"><a href="#docs-options" class="header-anchor">#</a> Docs Options</h4> <p>TypeScript typings:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> DocsOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'openapi-enforcer-middleware'</span>
</code></pre></div><table><thead><tr><th>Property</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>padding</td> <td><code>string</code></td> <td><code>0</code></td> <td>Specify the padding to wrap the docs page. Specifying an empty string will set the body margin and padding to defaults. Specifying any other value will set the body margin to zero and set the padding to the value specified.</td></tr> <tr><td>preRedocInitScripts</td> <td><code>string[]</code></td> <td><code>[]</code></td> <td>An array of strings for each JavaScript source to load prior to calling the Redoc init function.</td></tr> <tr><td>postRedocInitScripts</td> <td><code>string[]</code></td> <td><code>[]</code></td> <td>An array of strings for each JavaScript source to load after to calling the Redoc init function.</td></tr> <tr><td>redoc</td> <td><code>object</code></td> <td></td> <td>Redoc specific options. See redoc.cdnVersion and redoc.options for details.</td></tr> <tr><td>redoc.cdnVersion</td> <td><code>string</code></td> <td></td> <td>If specified then the public CDN will be used to get the redoc library with the version you've specified. If not specified then the middleware will look to see if you've installed the NPM Redoc package and will use your installed Redoc library. If not specified and you have not installed the Redoc package then it will use the <code>next</code> version off the CDN.</td></tr> <tr><td>redoc.options</td> <td><code>object</code></td> <td></td> <td>Options to pass directly to the redoc library during initialization.</td></tr> <tr><td>styleSheets</td> <td><code>string[]</code></td> <td></td> <td>An array of strings for each CSS href to load in the head of the HTML.</td></tr> <tr><td>title</td> <td><code>string</code></td> <td></td> <td>The HTML title for the page. Defaults to the title specified in the OpenAPI document info.title property with the exception that if that title is a blank string then it will use <code>&quot;API Documentation&quot;</code> as the title.</td></tr></tbody></table> <p><strong>Example</strong></p> <!----> <h2 id="init"><a href="#init" class="header-anchor">#</a> Init</h2> <p><code>init (options?: InitOptions)</code></p> <p>Initialize the middleware. You need to call this function as an express middleware prior to the routes that you want to validate but after any body parsing middleware you want to add.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>options</td> <td><a href="#init-options">Init Options</a></td> <td>An optional parameter that describes how the init middleware should work.</td></tr></tbody></table> <h4 id="init-options"><a href="#init-options" class="header-anchor">#</a> Init Options</h4> <p>TypeScript typings:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> InitOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'openapi-enforcer-middleware'</span>
</code></pre></div><table><thead><tr><th>Property</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>allowOtherQueryParameters</td> <td><code>boolean</code> or <code>string[]</code></td> <td><code>false</code></td> <td>A boolean or string array. If a boolean, <code>true</code> indicates that any query parameters (even those not defined in your OpenAPI spec) are allowed. Using <code>false</code> indicates that no query parameters outside of those defined in your OpenAPI spec are allowed. Specifying an array of strings specifies what specific query parameters are allowed outside of your OpenAPI spec.</td></tr> <tr><td>handleBadRequest</td> <td><code>boolean</code></td> <td><code>true</code></td> <td>How to handle invalid requests. If <code>true</code> a 400 response is sent back automatically. This means that a route you've defined will not be called when the request is invalid. If <code>false</code> and the request was invalid then your route will still execute but the <code>enforcer</code> property will not be set on the <code>req</code> and <code>res</code> objects.</td></tr> <tr><td>handleBadResponse</td> <td><code>boolean</code></td> <td><code>true</code></td> <td>How to handle invalid responses. If <code>true</code> a 500 response is sent back automatically, if <code>false</code> the next middleware is called with the error and the error will be logged to the console.</td></tr> <tr><td>handleNotFound</td> <td><code>boolean</code></td> <td><code>true</code></td> <td>How to handle requests for paths that do not exist. If <code>true</code> a 404 response is sent back automatically, if <code>false</code> the <code>enforcer</code> property is not set on the <code>req</code> and <code>res</code> objects.</td></tr> <tr><td>handleMethodNotAllowed</td> <td><code>boolean</code></td> <td><code>true</code></td> <td>How to handle method not allowed. If <code>true</code> a 405 response is sent back automatically, if <code>false</code> the <code>enforcer</code> property is not set on the <code>req</code> and <code>res</code> objects.</td></tr> <tr><td>mockHeader</td> <td><code>string</code></td> <td><code>&quot;x-mock&quot;</code></td> <td>The name to use for the mocking header. Set to an empty string to disable mock requests via the header. <a href="./mocking">Learn about mocking.</a></td></tr> <tr><td>mockQuery</td> <td><code>string</code></td> <td><code>&quot;x-mock&quot;</code></td> <td>The name to use for the mocking query parameter. Set to an empty string to disable mock requests via the query parameter. (The value specified will automatically be added to the <code>allowedOtherQueryParameters</code>.) <a href="./mocking">Learn about mocking.</a></td></tr> <tr><td>mockStore</td> <td><a href="mocking#mock-store">MockStore</a></td> <td><a href="mocking">CookieStore</a></td> <td>This mock store to use if the request is an implemented mock request. <a href="./mocking">Learn about mocking.</a></td></tr> <tr><td>xMockImplemented</td> <td><code>string</code></td> <td><code>x-mock-implemented</code></td> <td>The name of the OpenAPI extension property that identifies if the operation has a mock response implemented in your code. <a href="./mocking">Learn about mocking.</a></td></tr></tbody></table> <p><strong>Returns</strong> an express middleware function.</p> <p><strong>Example</strong></p> <!----> <h2 id="mock"><a href="#mock" class="header-anchor">#</a> Mock</h2> <p><code>mock ()</code></p> <p>This function enables fallback (automatic) mocking. This is useful if your API is in development and you've written your OpenAPI spec but have yet to write all of the code to implement the endpoints. Fallback mocking will pick up any requests for endpoints that have not yet been implemented and will automatically generate responses to send back.</p> <p><strong>Parameters</strong></p> <p>None</p> <p><strong>Returns</strong> an express middleware.</p> <p><strong>Example</strong></p> <p>You'll want to add the fallback mocking middleware after your routes, otherwise it will handle all requests and your routes will never get called.</p> <!----> <h2 id="on"><a href="#on" class="header-anchor">#</a> On</h2> <p><code>on (type: string, handler: Function)</code></p> <p>Add an event listener. Currently, only the <a href="#route">route</a> middleware emits events.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>type</td> <td><code>string</code></td> <td>The type of event to listen for.</td></tr> <tr><td>handler</td> <td><code>Function</code></td> <td>The function to call when the event occurs.</td></tr></tbody></table> <p><strong>Returns</strong> nothing.</p> <h2 id="route"><a href="#route" class="header-anchor">#</a> Route</h2> <p><code>route (controllers: Object, options?: RouteOptions</code>)`</p> <p>Automatically generate routes based on your OpenAPI document. This is done by specifying an <code>x-controller</code> and <code>x-operation</code> properties in your OpenAPI document and then telling this route middleware where to look to link those values to executable code.</p> <p>The big advantage of using this middleware is that you don't have to update your express routes manually when your OpenAPI document changes.</p> <p>To fully understand how this works, check out the <a href="route-builder">Route Builder</a> documentation.</p> <p><strong>Parameters</strong></p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>controllersDirectory</td> <td><code>string</code></td> <td>The directory path that contains your controller files.</td></tr> <tr><td>dependencies</td> <td><code>Array</code> or <code>Object</code></td> <td>Dependencies to inject into your controller factories. Learn more about this on the <a href="./route-builder#dependency-injection">Route Builder page</a>.</td></tr> <tr><td>options</td> <td><a href="#route-options">Route Options</a></td> <td>An optional parameter that can define how the route builder works.</td></tr></tbody></table> <h4 id="route-options"><a href="#route-options" class="header-anchor">#</a> Route Options</h4> <p>TypeScript typings:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'openapi-enforcer-middleware'</span>
</code></pre></div><table><thead><tr><th>Property</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>xController</td> <td><code>string</code></td> <td><code>x-controller</code></td> <td>The name of the property to look for in your OpenAPI document to specify the controller to use for an operation.</td></tr> <tr><td>xOperation</td> <td><code>string</code></td> <td><code>x-operation</code></td> <td>The name of the property to look for in your OpenAPI document to specify the controller's operation to use for an operation. The OpenAPI property <code>operationId</code> can be used in place of this value.</td></tr></tbody></table> <p><strong>Returns</strong> an express middleware.</p> <p><strong>Example</strong></p> <p>This example won't make much sense on its own. Check of the <a href="/openapi-enforcer-middleware/guide/route-builder.html">Route Builder</a> documentation for more details.</p> <!----></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/openapi-enforcer-middleware/assets/js/app.98b0fab6.js" defer></script><script src="/openapi-enforcer-middleware/assets/js/2.dcde1ce6.js" defer></script><script src="/openapi-enforcer-middleware/assets/js/12.aba0c263.js" defer></script><script src="/openapi-enforcer-middleware/assets/js/5.86c39536.js" defer></script>
  </body>
</html>
